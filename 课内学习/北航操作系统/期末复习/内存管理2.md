# 内存管理2

## 程序在内存的分布

![image-20250601102651233](E:\Practising-diary\课内学习\北航操作系统\期末复习\内存管理2.assets\image-20250601102651233.png)

- .bss存放未初始化的全局变量
- .data存放已经初始化的全局变量
- .text存放代码

## 链接过程的本质

合并相同的“节”

## ELF文件格式

![image-20250601103112258](E:\Practising-diary\课内学习\北航操作系统\期末复习\内存管理2.assets\image-20250601103112258.png)

## 程序的装载流程

- 读取ELF头部的魔数
- 找到段表项
- 对每个段表项解析出各个段应当被加载的虚地址，在文件中的 偏移，以及在内存中的大小和在文件中的大小
- 对每个段根据其在内存中的大小，为其分配足够的物理页，映射到指定的虚地址上。再将文件中的内容拷贝到内存中
- 若ELF中记录的段再内存中的戴奥大于再文件中的大小，多出来的部分用0填充。
- 设置进程控制块中的PC为ELF文件中记载的入口地址
- 将控制权交给进程开始执行

