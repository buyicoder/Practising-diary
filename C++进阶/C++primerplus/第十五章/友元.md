# 友元

## 友元类

友元不仅仅可以是函数，还可以是类

例子：遥控器类是电视类的友元。

声明可以在类的任何位置，无关紧要

```c++
friend class Remote;
```

声明之后Remote的所有函数获得TV的权限



也可以只有部分函数获得权限，但是要主要编译时的信息获取。

```c++
friend class Remote::set_chan();
```

编译到这里的时候编译器需要知道Remote和set_chan()是什么东西

而Remote因为用了TV的方法，所以应该把Remote放在TV前面

所以需要用到前向声明

```c++
class Tv;
class Remote {...};
class Tv {...};
```

如果使用了内联定义，要看是否能正确编译，如果不能，还是要分开，在类中声明，把定义放在后面。

两个类可以互为友元

两个类还可以有共同的友元

## 嵌套类

嵌套类其实就是在类中声明类

则声明出的类作用域只在此类中

只有在public声明才可以在外界使用，而且要用限定符才能使用

如果有如下定义：

```c++
class Team
{
public:
	class Coach {...};
	...
};
```

使用应该这么使用：

```c++
Team::Coach forhire;
```

==结构是一种成员默认为公有的类==

权限如下：

![image-20250212140739097](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20250212140739097.png)

在模板类中使用嵌套类不会有任何问题

嵌套类中也可以包含模板参数

嵌套类是新特性，旧版本C++不允许嵌套类

要分清嵌套和包含的区别，

嵌套是在类中声明类，不会定义成员，只是嵌套类的作用域有讲究

包含是在类中将另一个类作为成员